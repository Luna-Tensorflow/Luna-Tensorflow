import Tensorflow.Operations
import Tensorflow.Tensor
import Tensorflow.Types
import Tensorflow.Graph
import Tensorflow.Variables

def vartest:
    defaultValue = Tensors.fromList1d FloatType [1.0]
    x = Variables.make "x" defaultValue
    c = Operations.constFromList FloatType [23.0]
    u1 = Variables.assign x c

    g = TFGraphMaker.makeFromOutput u1
    st1 = StateOps.makeEmpty
    (u2, st2) = g.eval st1

    val = st2.value FloatType "x"
    print val.toJSON # should print 23

    y = x + c

    print y.toJSON # evals in default context, so should return 24

    g2 = TFGraphMaker.makeFromOutput y
    (xout, st3) = g2.eval st2
    print xout.toJSON # should print 23+23 = 46, as it evals after the assignment (st2)
